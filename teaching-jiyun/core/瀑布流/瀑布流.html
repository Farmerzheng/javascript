<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style type="text/css">
    *{
    	margin:0;
    	padding:0;
    }
    ul,li{
    	list-style: none
    }
	.container{
		width:1000px;
		margin:0 auto;
	}
	.container ul{
		width:250px;
		float: left;		
	}
	.container ul li{
		width:240px;
		border:1px solid yellow;
		margin:0 auto;
		background-color: red;
		margin-bottom:5px;
	}
	.container ul li img{
		width:100%;
		height:100%;
	}
</style>
<body>
	<div class="container">
		<ul></ul>
		<ul></ul>
		<ul></ul>
		<ul></ul>
	</div>
	<script type="text/javascript">

		var ulArr = document.getElementsByTagName("ul");

		function createLi(){

			for(var j = 0 ; j < 30 ; j++){
			var li = document.createElement("li");
			li.style.height = randomNum(200,150)+"px";
			// li.innerHTML = "<img src = 'img/"+(j+1)+".jpg'>";
            li.innerHTML = j ;
			// var img = li.querySelector("img");
// 
			// img.onload = function(){

				//计算ul高度
				var ulHeightArr = [];

			   for(var i = 0 ; i < ulArr.length; i++){
		             var height = ulArr[i].offsetHeight;
		             ulHeightArr.push(height);
			   } 

				//计算ul的高度的最小值
				var minHeight = ulHeightArr[0] ;
				var minIndex = 0 ;
				for(var i = 0 ; i < ulHeightArr.length ; i++){
		              if(minHeight>ulHeightArr[i]){
		              	 minHeight = ulHeightArr[i] ;
		              	 minIndex = i ;
		              }
				}

				// console.log(ulArr[])

				ulArr[minIndex].appendChild(li);
				// }
			
		    }

		}

	    createLi();	

          
         function randomNum(max,min){
         	return parseInt(Math.random()*(max - min +1))+min;
         } 
         
         var windowH = document.documentElement.clientHeight;
         window.onscroll = function(){
             var scrollTop = document.documentElement.scrollTop||document.body.scrollTop;
             var documentHeight = document.documentElement.scrollHeight;
             if(scrollTop+windowH >= documentHeight){
                createLi();
             }
         }

	</script>
</body>
</html>